{
  "id": "c8d84fc1-ae33-4d5b-87b6-998198a4c7ef",
  "type": "page/dashboard",
  "title": "DevOps",
  "content": {
    "_type": "layout/list",
    "contents": [
      {
        "_type": "layout/column",
        "columns": [
          {
            "width": 50,
            "contents": [
              {
                "_type": "layout/list",
                "contents": [
                  {
                    "_type": "tile/generic-webapi-donut",
                    "config": {
                      "context": {
                        "sign": true,
                        "scope": {
                          "type": "specific"
                        }
                      },
                      "source": {
                        "_security": "signing",
                        "method": "GET",
                        "columns": {
                          "aggregation": "sum",
                          "isCategoryOptional": false,
                          "values": [
                            {
                              "key": "Success",
                              "value": "{{SucceededCount}}"
                            },
                            {
                              "key": "Failed",
                              "value": "{{FailedCount}}"
                            },
                            {
                              "key": "Partial",
                              "value": "{{PartiallySucceededCount}}"
                            }
                          ],
                          "category": ""
                        },
                        "provider": "Azure DevOps",
                        "url": "_odata/v4.0-preview/PipelineRuns?$apply=filter(PipelineId eq 64 and CompletedDateSK ge {{new Date(Date.now()-86400*14*1000).toISOString().substring(0,10).replace(/-/g,'')}} and (CanceledCount ne 1))/groupby((CompletedDateSK), aggregate($count as TotalCount, PartiallySucceededCount with sum as PartiallySucceededCount, SucceededCount with sum as SucceededCount, FailedCount with sum as FailedCount))&$orderby= CompletedDateSK asc ",
                        "keypath": "value"
                      },
                      "display": {
                        "sizeMode": "default",
                        "legendScale": 81,
                        "showLegend": true,
                        "legendPosition": "right",
                        "palette": 2
                      }
                    },
                    "title": "Build",
                    "description": "Last 14 days"
                  },
                  {
                    "_type": "tile/generic-webapi-linegraph",
                    "config": {
                      "context": {
                        "sign": true,
                        "scope": {
                          "type": "specific"
                        }
                      },
                      "source": {
                        "_security": "signing",
                        "method": "GET",
                        "columns": {
                          "isCategoryOptional": true,
                          "values": [
                            {
                              "key": "",
                              "value": "{{MaxCount}}"
                            }
                          ],
                          "category": "",
                          "timestamp": "{{SamplingTime}}"
                        },
                        "topn": 0,
                        "provider": "Azure DevOps",
                        "url": "_odata/v4.0-preview/TaskAgentRequestSnapshots?$apply=filter(SamplingDateSK ge {{new Date(Date.now()-86400*30*1000).toISOString().substring(0,10).replace(/-/g,'')}} AND Project/ProjectVisibility ne 'Public' AND IsRunning eq false AND IsHosted eq true)/groupby((SamplingDateSK, SamplingHour, SamplingTime), aggregate($count as Count))/groupby((SamplingTime),aggregate(Count with max as MaxCount))&$orderby=SamplingTime asc",
                        "keypath": "value"
                      },
                      "display": {
                        "range": "fit",
                        "height": 145,
                        "label": "auto",
                        "showKey": false,
                        "rangemin": "",
                        "rangemax": ""
                      }
                    },
                    "title": "Job Queue",
                    "description": "Last 30 days"
                  },
                  {
                    "_type": "tile/generic-webapi-bargraph",
                    "config": {
                      "context": {
                        "sign": true,
                        "scope": {
                          "type": "specific"
                        }
                      },
                      "source": {
                        "_security": "signing",
                        "method": "GET",
                        "columns": {
                          "aggregation": "count",
                          "isCategoryOptional": false,
                          "values": [],
                          "category": "{{ActivityCompletedDate.substring(0,10)}}"
                        },
                        "desc": true,
                        "url": "_odata/v4.0-preview/PipelineRunActivityResults?$apply=filter(Pipeline/PipelineId eq 64 and ActivityCompletedDate ge {{new Date(Date.now() - 86400000 * 14).toISOString()}} and (ActivityType eq null or ActivityType eq 'Task') and PipelineRunOutcome eq 'Failed' and TaskOutcome eq 'Failed')&$orderby=PipelineRunCompletedDateSK asc",
                        "keypath": "value",
                        "provider": "Azure DevOps",
                        "topn": 10
                      },
                      "display": {
                        "range": "zero-fit",
                        "label": "auto",
                        "sort": {
                          "order": "desc",
                          "property": "values",
                          "option": "values"
                        },
                        "multipleColours": true,
                        "customLabel": ""
                      }
                    },
                    "description": "Last 14 Days",
                    "title": "Build Failures"
                  }
                ]
              }
            ]
          },
          {
            "contents": [
              {
                "_type": "layout/list",
                "contents": [
                  {
                    "_type": "tile/generic-webapi-linegraph",
                    "config": {
                      "context": {
                        "sign": true,
                        "scope": {
                          "type": "specific"
                        }
                      },
                      "source": {
                        "_security": "signing",
                        "method": "GET",
                        "columns": {
                          "isCategoryOptional": true,
                          "values": [
                            {
                              "key": "",
                              "value": "{{Math.round(DurationPercentile)/60}}"
                            }
                          ],
                          "category": "",
                          "timestamp": "{{CompletedDate}}"
                        },
                        "topn": 0,
                        "provider": "Azure DevOps",
                        "url": "_odata/v4.0-preview/PipelineRuns?$apply=filter(PipelineId eq 64 and CompletedDateSK ge {{new Date(Date.now()-86400*30*1000).toISOString().substring(0,10).replace(/-/g,'')}} and (SucceededCount eq 1 or PartiallySucceededCount eq 1))/compute(percentile_cont(TotalDurationSeconds, 0.8, CompletedDateSK) as DurationPercentile)/groupby((DurationPercentile, CompletedDateSK, CompletedDate),aggregate($count as TotalCount))&$orderby= CompletedDateSK asc ",
                        "keypath": "value"
                      },
                      "display": {
                        "range": "zero-fit",
                        "height": 145,
                        "label": "auto",
                        "showKey": false
                      }
                    },
                    "description": "Last 30 days",
                    "title": "Build Duration"
                  },
                  {
                    "_type": "tile/generic-webapi-linegraph",
                    "config": {
                      "context": {
                        "sign": true,
                        "scope": {
                          "type": "specific"
                        }
                      },
                      "source": {
                        "_security": "signing",
                        "method": "GET",
                        "columns": {
                          "isCategoryOptional": true,
                          "values": [
                            {
                              "key": "",
                              "value": "{{MaxCount}}"
                            }
                          ],
                          "category": "",
                          "timestamp": "{{SamplingTime}}"
                        },
                        "topn": 0,
                        "provider": "Azure DevOps",
                        "url": "_odata/v4.0-preview/TaskAgentRequestSnapshots?$apply=filter(SamplingDateSK ge {{new Date(Date.now()-86400*30*1000).toISOString().substring(0,10).replace(/-/g,'')}} AND Project/ProjectVisibility ne 'Public' AND IsRunning eq true AND IsHosted eq true)/groupby((SamplingDateSK, SamplingHour, SamplingTime), aggregate($count as Count))/groupby((SamplingTime),aggregate(Count with max as MaxCount))&$orderby=SamplingTime asc ",
                        "keypath": "value"
                      },
                      "display": {
                        "range": "zero-fit",
                        "height": 145,
                        "label": "auto",
                        "showKey": false
                      }
                    },
                    "title": "MS Agent Usage - Max 12",
                    "description": "Last 30 days"
                  },
                  {
                    "_type": "tile/generic-webapi-bargraph",
                    "config": {
                      "context": {
                        "sign": true,
                        "scope": {
                          "type": "specific"
                        }
                      },
                      "source": {
                        "_security": "signing",
                        "method": "GET",
                        "columns": {
                          "aggregation": "count",
                          "isCategoryOptional": false,
                          "values": [],
                          "category": "{{TaskDisplayName}}"
                        },
                        "provider": "Azure DevOps",
                        "url": "_odata/v4.0-preview/PipelineRunActivityResults?$apply=filter(Pipeline/PipelineId eq 64 and ActivityCompletedDate ge {{new Date(Date.now() - 86400000 * 14).toISOString()}} and (ActivityType eq null or ActivityType eq 'Task') and PipelineRunOutcome eq 'Failed' and TaskOutcome eq 'Failed')&$orderby= PipelineRunCompletedDateSK asc ",
                        "keypath": "value",
                        "desc": true,
                        "topn": 10
                      },
                      "display": {
                        "range": "zero-fit",
                        "label": "auto",
                        "sort": {
                          "order": "desc",
                          "property": "values",
                          "option": "values"
                        },
                        "multipleColours": true
                      }
                    },
                    "description": "Last 14 Days",
                    "title": "Build Failures By Stage Name"
                  }
                ]
              }
            ],
            "width": 50
          }
        ]
      },
      {
        "_type": "layout/column",
        "columns": [
          {
            "width": 100,
            "contents": [
              {
                "_type": "layout/list",
                "contents": [
                  {
                    "_type": "layout/column",
                    "columns": [
                      {
                        "width": 50,
                        "contents": [
                          {
                            "_type": "layout/list",
                            "contents": [
                              {
                                "_type": "tile/generic-webapi-bargraph",
                                "config": {
                                  "context": {
                                    "sign": true,
                                    "scope": {
                                      "type": "specific"
                                    }
                                  },
                                  "source": {
                                    "_security": "signing",
                                    "method": "GET",
                                    "columns": {
                                      "aggregation": "none",
                                      "isCategoryOptional": false,
                                      "values": [
                                        {
                                          "key": "",
                                          "value": "{{FailedCount}}"
                                        }
                                      ],
                                      "category": "{{Test.TestName}}"
                                    },
                                    "provider": "Azure DevOps",
                                    "url": "_odata/v4.0-preview/TestResultsDaily?$apply=filter(ReleasePipelineId eq 53 and DateSK ge {{new Date(Date.now()-86400*30*1000).toISOString().substring(0,10).replace(/-/g,'')}} and ReleaseStageId eq 209 )/groupby((TestSK, Test/TestName), aggregate(ResultCount with sum as TotalCount, ResultDurationSeconds with sum as TotalDuration, ResultPassCount with sum as PassedCount, ResultFailCount with sum as FailedCount,ResultNotExecutedCount with sum as NotExecutedCount, ResultNotImpactedCount with sum as NotImpactedCount))/filter(FailedCount gt 0)/compute(TotalDuration div cast(TotalCount,Edm.Double) as AvgDuration,iif(TotalCount gt NotExecutedCount, ((PassedCount add NotImpactedCount) div cast(TotalCount sub NotExecutedCount, Edm.Decimal)) mul 100, 0) as PassRate)&$top=10&$orderby=FailedCount desc",
                                    "keypath": "value",
                                    "desc": true,
                                    "topn": 10
                                  },
                                  "display": {
                                    "range": "zero-fit",
                                    "label": "auto",
                                    "sort": {
                                      "order": "desc",
                                      "property": "values",
                                      "option": "values"
                                    },
                                    "multipleColours": false
                                  }
                                },
                                "description": "Top 10 in last 30 days",
                                "title": "SCOM E2E Testing Failures"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "width": 50,
                        "contents": [
                          {
                            "_type": "layout/list",
                            "contents": [
                              {
                                "_type": "tile/generic-webapi-linegraph",
                                "config": {
                                  "context": {
                                    "sign": true,
                                    "scope": {
                                      "type": "specific"
                                    }
                                  },
                                  "source": {
                                    "_security": "signing",
                                    "method": "GET",
                                    "columns": {
                                      "isCategoryOptional": true,
                                      "values": [
                                        {
                                          "key": "",
                                          "value": "{{Math.round(AvgDuration)/60}}"
                                        }
                                      ],
                                      "category": "",
                                      "timestamp": "{{CompletedDate}}"
                                    },
                                    "topn": 0,
                                    "provider": "Azure DevOps",
                                    "url": "_odata/v4.0-preview/TestRuns?$apply=filter(ReleasePipelineId eq 53 and CompletedDateSK ge {{new Date(Date.now()-86400*30*1000).toISOString().substring(0,10).replace(/-/g,'')}} and ((ReleaseStageId eq 209)))/groupby((CompletedDate, ReleaseEnvironmentId) , aggregate(ResultDurationSeconds with sum as ResultDurationSeconds))/groupby((CompletedDate), aggregate(ResultDurationSeconds with average as AvgDuration))&$orderby= CompletedDate asc ",
                                    "keypath": "value"
                                  },
                                  "display": {
                                    "range": "zero-fit",
                                    "height": 362,
                                    "label": "auto",
                                    "showKey": false
                                  }
                                },
                                "description": "in Minutes over last 30 days",
                                "title": "Average SCOM E2E Testing Time"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "_type": "layout/column",
                    "columns": [
                      {
                        "width": 50,
                        "contents": [
                          {
                            "_type": "layout/list",
                            "contents": [
                              {
                                "_type": "tile/generic-webapi-bargraph",
                                "config": {
                                  "context": {
                                    "sign": true,
                                    "scope": {
                                      "type": "specific"
                                    }
                                  },
                                  "source": {
                                    "_security": "signing",
                                    "method": "GET",
                                    "columns": {
                                      "aggregation": "none",
                                      "isCategoryOptional": false,
                                      "values": [
                                        {
                                          "key": "",
                                          "value": "{{FailedCount}}"
                                        }
                                      ],
                                      "category": "{{Test.TestName}}"
                                    },
                                    "provider": "Azure DevOps",
                                    "url": "_odata/v4.0-preview/TestResultsDaily?$apply=filter(ReleasePipelineId eq 53 and DateSK ge {{new Date(Date.now()-86400*30*1000).toISOString().substring(0,10).replace(/-/g,'')}} and ReleaseStageId eq 210 )/groupby((TestSK, Test/TestName), aggregate(ResultCount with sum as TotalCount, ResultDurationSeconds with sum as TotalDuration, ResultPassCount with sum as PassedCount, ResultFailCount with sum as FailedCount,ResultNotExecutedCount with sum as NotExecutedCount, ResultNotImpactedCount with sum as NotImpactedCount))/filter(FailedCount gt 0)/compute(TotalDuration div cast(TotalCount,Edm.Double) as AvgDuration,iif(TotalCount gt NotExecutedCount, ((PassedCount add NotImpactedCount) div cast(TotalCount sub NotExecutedCount, Edm.Decimal)) mul 100, 0) as PassRate)&$top=10&$orderby=FailedCount desc",
                                    "keypath": "value",
                                    "desc": true,
                                    "topn": 10
                                  },
                                  "display": {
                                    "range": "zero-fit",
                                    "label": "auto",
                                    "sort": {
                                      "order": "desc",
                                      "property": "values",
                                      "option": "values"
                                    },
                                    "multipleColours": false
                                  }
                                },
                                "description": "Top 10 in last 30 days",
                                "title": "Azure E2E Testing Failures"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "width": 50,
                        "contents": [
                          {
                            "_type": "layout/list",
                            "contents": [
                              {
                                "_type": "tile/generic-webapi-linegraph",
                                "config": {
                                  "context": {
                                    "sign": true,
                                    "scope": {
                                      "type": "specific"
                                    }
                                  },
                                  "source": {
                                    "_security": "signing",
                                    "method": "GET",
                                    "columns": {
                                      "isCategoryOptional": true,
                                      "values": [
                                        {
                                          "key": "",
                                          "value": "{{Math.round(AvgDuration)/60}}"
                                        }
                                      ],
                                      "category": "",
                                      "timestamp": "{{CompletedDate}}"
                                    },
                                    "topn": 0,
                                    "provider": "Azure DevOps",
                                    "url": "_odata/v4.0-preview/TestRuns?$apply=filter(ReleasePipelineId eq 53 and CompletedDateSK ge {{new Date(Date.now()-86400*30*1000).toISOString().substring(0,10).replace(/-/g,'')}} and ((ReleaseStageId eq 210)))/groupby((CompletedDate, ReleaseEnvironmentId) , aggregate(ResultDurationSeconds with sum as ResultDurationSeconds))/groupby((CompletedDate), aggregate(ResultDurationSeconds with average as AvgDuration))&$orderby= CompletedDate asc ",
                                    "keypath": "value"
                                  },
                                  "display": {
                                    "range": "zero-fit",
                                    "height": 362,
                                    "label": "custom",
                                    "showKey": false,
                                    "customLabel": ""
                                  }
                                },
                                "description": "in Minutes over last 30 days",
                                "title": "Average AZURE E2E Testing Time"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  },
                  {
                    "_type": "layout/column",
                    "columns": [
                      {
                        "width": 50,
                        "contents": [
                          {
                            "_type": "layout/list",
                            "contents": [
                              {
                                "_type": "tile/generic-webapi-bargraph",
                                "config": {
                                  "context": {
                                    "sign": true,
                                    "scope": {
                                      "type": "specific"
                                    }
                                  },
                                  "source": {
                                    "_security": "signing",
                                    "method": "GET",
                                    "columns": {
                                      "aggregation": "none",
                                      "isCategoryOptional": false,
                                      "values": [
                                        {
                                          "key": "",
                                          "value": "{{FailedCount}}"
                                        }
                                      ],
                                      "category": "{{Test.TestName}}"
                                    },
                                    "provider": "Azure DevOps",
                                    "url": "_odata/v4.0-preview/TestResultsDaily?$apply=filter(ReleasePipelineId eq 53 and DateSK ge {{new Date(Date.now()-86400*30*1000).toISOString().substring(0,10).replace(/-/g,'')}} and ReleaseStageId eq 211 )/groupby((TestSK, Test/TestName), aggregate(ResultCount with sum as TotalCount, ResultDurationSeconds with sum as TotalDuration, ResultPassCount with sum as PassedCount, ResultFailCount with sum as FailedCount,ResultNotExecutedCount with sum as NotExecutedCount, ResultNotImpactedCount with sum as NotImpactedCount))/filter(FailedCount gt 0)/compute(TotalDuration div cast(TotalCount,Edm.Double) as AvgDuration,iif(TotalCount gt NotExecutedCount, ((PassedCount add NotImpactedCount) div cast(TotalCount sub NotExecutedCount, Edm.Decimal)) mul 100, 0) as PassRate)&$top=10&$orderby=FailedCount desc",
                                    "keypath": "value",
                                    "desc": true,
                                    "topn": 10
                                  },
                                  "display": {
                                    "range": "zero-fit",
                                    "label": "auto",
                                    "sort": {
                                      "order": "desc",
                                      "property": "values",
                                      "option": "values"
                                    },
                                    "multipleColours": false
                                  }
                                },
                                "title": "DS E2E Testing Failures",
                                "description": "Top 10 in last 30 days"
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "width": 50,
                        "contents": [
                          {
                            "_type": "layout/list",
                            "contents": [
                              {
                                "_type": "tile/generic-webapi-linegraph",
                                "config": {
                                  "context": {
                                    "sign": true,
                                    "scope": {
                                      "type": "specific"
                                    }
                                  },
                                  "source": {
                                    "_security": "signing",
                                    "method": "GET",
                                    "columns": {
                                      "isCategoryOptional": true,
                                      "values": [
                                        {
                                          "key": "",
                                          "value": "{{Math.round(AvgDuration)/60}}"
                                        }
                                      ],
                                      "category": "",
                                      "timestamp": "{{CompletedDate}}"
                                    },
                                    "topn": 0,
                                    "provider": "Azure DevOps",
                                    "url": "_odata/v4.0-preview/TestRuns?$apply=filter(ReleasePipelineId eq 53 and CompletedDateSK ge {{new Date(Date.now()-86400*30*1000).toISOString().substring(0,10).replace(/-/g,'')}} and ((ReleaseStageId eq 211)))/groupby((CompletedDate, ReleaseEnvironmentId) , aggregate(ResultDurationSeconds with sum as ResultDurationSeconds))/groupby((CompletedDate), aggregate(ResultDurationSeconds with average as AvgDuration))&$orderby= CompletedDate asc ",
                                    "keypath": "value"
                                  },
                                  "display": {
                                    "range": "zero-fit",
                                    "height": 362,
                                    "label": "custom",
                                    "showKey": false,
                                    "customLabel": ""
                                  }
                                },
                                "description": "in Minutes over last 30 days",
                                "title": "Average DS E2E Testing Time"
                              }
                            ]
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ]
      }
    ]
  },
  "derivedFrom": "00000000-0000-0000-0000-000000000000",
  "draft": false
}